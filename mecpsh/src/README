MECP LOCATION PROGRAM - INSTRUCTIONS FOR USE
J. Harvey, 17.11.1999

1. This program can be freely distibuted. Users should give the following reference:

J.N. Harvey, M.Aschi, H. Schwarz, W. Koch, Theor. Chem. Accts., 1998, 99, p. 95.

Queries/comments/suggestions/etc. to jeremy.harvey@bris.ac.uk


2. This tar file should unpack to a directory 'CROSSING' containing three items:
     - this file
     - directory "PROGRAM"
     - directory "SHELL"


3. First, you should compile the Fortran Program:

(a) cd to PROGRAM
(b) Edit the 'MainProgram.f' file. Near the top, 'Natom' should be
the number of atoms of your system.
(c) Optional - Edit the geometry convergence criteria in 'Testconvergence.f'.
These are pre-set at a rather pedantic level, similar to the standard Gaussian
cutoffs. Converging to this level typically requires many more steps than if
you opt for 'looser' thresholds (e.g. 5 times larger), and makes no difference
on energies etc.
(d) compile using 'make'. Depending on your compiler, this may require
editing the makefile, e.g. for the name of your compiler etc. I have tested
the program with the gnu g77 compiler on Linux, and the f77 SGI compiler.


4. Setup the job in the directory you want to work in.

(a) copy all files in 'SHELL' to that directory.
(b) copy the executable, MECP.x, to the directory.
(c) edit the 'master_script' file. Near the top, 'Natom' should be
the number of atoms of your system.
(d) edit a file called 'geom'. This should include the geometry of the
starting guess for the MECP geometry, in cartesian coordinates and Angstroms,
with the atom label given as the ATOMIC NUMBER (6 for carbon, 26 for iron, etc.):
e.g.
6   0.   0.   2.5
8   0.   0.   1.2
...
The file should include at least one blank line at the end, but
there should be no blank space at all at the top of the file.
(e) edit the file called 'first_progfile' - number of atoms & geometry. The
geometry should be identical to that in 'geom', so it is best to read it in.
(f) copy 'first_progfile' to 'ProgFile'. In case something goes wrong, and
'ProgFile' has been changed, you can recover the original.
(g) edit the files 'Input_Header_A' and 'Input_Header_B'. These give input
for the Gaussian job and will be included automatically at every step of the
optimization. The models provided should help you set these up. _A will be for
one spin state, _B for the other.
(h) create the first Gaussian input files, Job0_A.com & Job0_B.com. To do this,
type : > csh -f Make_First_Inputs
(i) if necessary, edit the first files accordingly. You may e.g. wish to remove
the 'guess(read)' card.
(j) At this stage, you can also run the jobs in a normal way
(e.g. 'g03 Job0_A.gjf &' or 'qsub Job0_A.gjf' etc.). This will enable you e.g.
to copy the singlet checkfile to provide an initial guess for the triplet calc.
('cp sing.chk trip.chk'). Otherwise, the jobs will be executed by the script.
(k) Edit the 'awk' scripts for analyzing the Gaussian Output. 'extract_gradient'
should be OK in all cases. You should copy 'extract_energy_dft_scf' to
'extract_energy' if you are using a dft or SCF level of theory, or
'extract_energy_mp2' is you are using mp2. Many other levels, and indeed many
other ab initio packages, can be used by editing these files appropriately. You
would obviously have to change the 'Input_Header_X' files, and may want to alter
the Fortran 'WriteGeomFile.f'. Altered scripts etc. to work with the Jaguar
program package are available upon request.


5. Execute the script which optimizes the MECP:
'csh -f master_script'
This will call Gaussian, extract the results, call the Fortran geometry optimization
step, prepare the Gaussian input with the updated geometry, and check for convergence.
It will also write convergence data at each cycle to the file called 'ReportFile'.



6. You can test all of this by using the geom, Input_Header, etc. files provided
in the 'SHELL' directory. You should get something like the sample 'ReportFile'
(reportfile_SAMPLE) also included.



7. Good luck...


Jeremy Harvey
University of Bristol.

